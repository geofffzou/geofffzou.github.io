<!DOCTYPE html>
<html>
<head>
  <title>Leaflet SVG Overlay</title>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css"/>

  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 30px;
    }

    #map {
      width: 500px;
      height: 350px;
      border: 2px solid black;
      border-radius: 10px;
    }

    .controls {
      margin-bottom: 15px;
    }
  </style>
</head>
<body>

<h2>SVG Draggable Overlay</h2>

<div class="controls">
  <button onclick="getCoords()">Get Coordinates</button>
  <div id="output"></div>
</div>

<div id="map"></div>

<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

<script>
  const map = L.map('map').setView([37.7749, -122.4194], 13);

  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    attribution: '&copy; OpenStreetMap contributors'
  }).addTo(map);

  // Initial bounds
  let bounds = [
    [37.77, -122.43],   // southwest
    [37.78, -122.41]    // northeast
  ];

  // Create SVG content
  const svgContent = `
    <svg xmlns="http://www.w3.org/2000/svg" width="200" height="200">
      <circle cx="100" cy="100" r="80"
              fill="red"
              fill-opacity="0.5"
              stroke="black"
              stroke-width="3"/>
    </svg>
  `;

  // Add SVG overlay
  let overlay = L.svgOverlay(svgContent, bounds, {
    interactive: true
  }).addTo(map);

  // Enable dragging
  overlay.on('mousedown', function(e) {
    map.dragging.disable();
  });

  map.on('mouseup', function() {
    map.dragging.enable();
  });

  map.on('mousemove', function(e) {
    if (!map.dragging._enabled) {
      const size = 0.01;

      bounds = [
        [e.latlng.lat - size, e.latlng.lng - size],
        [e.latlng.lat + size, e.latlng.lng + size]
      ];

      overlay.setBounds(bounds);
    }
  });

  function getCoords() {
    document.getElementById('output').innerHTML =
      "SouthWest: " + bounds[0].join(", ") + "<br>" +
      "NorthEast: " + bounds[1].join(", ");
  }
</script>

</body>
</html>
